<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CleariFy GST</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<style>
body { font-family: Arial; }
.view { display:none; }
.view.active { display:block; }
</style>
</head>

<body class="bg-slate-50">

<!-- NAV -->
<nav class="flex justify-between p-5 bg-white border-b">
<div onclick="showView('landing')" class="font-bold text-xl cursor-pointer">CleariFy</div>

<div class="space-x-4">
<button onclick="showView('login')">Login</button>
<button onclick="showView('register')" class="bg-blue-600 text-white px-4 py-2 rounded">Register</button>
<button onclick="showView('invoice')" class="bg-green-600 text-white px-4 py-2 rounded">Invoice</button>
</div>
</nav>

<!-- LANDING -->
<div id="landing" class="view active p-10 text-center">
<h1 class="text-4xl font-bold">GST Filing Made Simple</h1>
<p class="mt-4 text-gray-500">Create and Manage GST Invoices</p>
</div>

<!-- LOGIN -->
<div id="login" class="view p-10">
<h2 class="text-2xl font-bold mb-4">Login</h2>
<input class="border p-2 block mb-3" placeholder="Email">
<input class="border p-2 block mb-3" placeholder="Password">
<button class="bg-blue-600 text-white px-5 py-2 rounded">Login</button>
</div>

<!-- REGISTER -->
<div id="register" class="view p-10">
<h2 class="text-2xl font-bold mb-4">Register</h2>
<input class="border p-2 block mb-3" placeholder="Name">
<input class="border p-2 block mb-3" placeholder="Email">
<input class="border p-2 block mb-3" placeholder="Password">
<button class="bg-blue-600 text-white px-5 py-2 rounded">Register</button>
</div>

<!-- INVOICE CREATE -->
<div id="invoice" class="view p-10">
<h2 class="text-2xl font-bold mb-6">Create GST Invoice</h2>

<div class="grid grid-cols-2 gap-4 max-w-2xl">

<input id="seller_gstin" class="border p-2" placeholder="Seller GSTIN">
<input id="buyer_gstin" class="border p-2" placeholder="Buyer GSTIN">

<input id="invoice_number" class="border p-2" placeholder="Invoice Number">
<input id="taxable_value" class="border p-2" placeholder="Taxable Value">

<input id="gst_value" class="border p-2" placeholder="GST Value">
<input id="total_value" class="border p-2" placeholder="Total Value">

</div>

<button onclick="createInvoice()" class="mt-6 bg-green-600 text-white px-6 py-3 rounded">
Save Invoice
</button>

<p id="result" class="mt-4 text-green-600 font-bold"></p>

</div>
<script>
async function loadInvoices() {
    try {
        let response = await fetch("http://127.0.0.1:8000/api/invoices/");
        let data = await response.json();
        console.log("Invoices:", data);

        alert("Backend Connected Successfully!");
    } catch (error) {
        console.log("Error:", error);
        alert("Backend Connection Failed!");
    }
}

loadInvoices();
</script>

<script>

function showView(id){
document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

/* ðŸ”¥ BACKEND CONNECTION */
async function createInvoice(){

let data = {
seller_gstin: document.getElementById("seller_gstin").value,
buyer_gstin: document.getElementById("buyer_gstin").value,
invoice_number: document.getElementById("invoice_number").value,
taxable_value: document.getElementById("taxable_value").value,
gst_value: document.getElementById("gst_value").value,
total_value: document.getElementById("total_value").value,
status: "CREATED"
};

let res = await fetch("http://127.0.0.1:8000/api/invoices/",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body: JSON.stringify(data)
});

let result = await res.json();
document.getElementById("result").innerText="Invoice Saved Successfully";

}

</script>

</body>
</html>


